匹配规则
=====

[阮一峰](http://javascript.ruanyifeng.com/stdlib/regexp.html#toc11)

# 字面量字符

如果在正则表达式之中，某个字符**只表示它字面的含义**，那么它们就叫做“字面量字符”（literal characters）

```
/dog/.test("old dog") // true
```

# 元字符

- 点字符（.)
点字符（.）匹配除回车（\r）、换行(\n) 、行分隔符（\u2028）和段分隔符（\u2029）以外的所有字符

- 位置字符

位置字符用来提示字符所处的位置，主要有两个字符

> `^` 表示字符串的开始位置
> `$` 表示字符串的结束位置

eg:

```
<!-- test必须出现在开始位置 -->
/^test/.test('test123') // true

<!-- test必须出现在结束位置 -->
/test$/.test('new test') // true

<!-- 从开始位置到结束位置只有test -->
/^test$/.test('test') // true
/^test$/.test('test test') // false

```

- 选择符（`|`）

竖线符号（`|`）在正则表达式中表示“或关系”（OR），即`cat|dog`表示匹配`cat`或`dog`

**选择符会包括它前后的多个字符：**

比如`/ab|cd/`指的是匹配ab或者cd，而不是指匹配b或者c。如果想修改这个行为，可以使用圆括号`/a(b|c)d/`

**多个选择符可以联合使用：**

- 其他

其他的元字符还包括`\\`、`\*`、`+`、`?`、`()`、`[]`、`{}`等，将在下文解释

# 转义符 `\`

**需要转义的字符**:正则模式中，需要用斜杠转义的，eg: `\*`一共有12个字符：

`^`, `.`, `[`, `$`, `(`, `)`, `|`, `*`, `+`, `?`

# 特殊字符

> `\cX` 表示Ctrl-[X]，其中的X是A-Z之中任一个英文字母，用来匹配控制字符。
> `[\b]` 匹配退格键(U+0008)，不要与\b混淆。
> `\n` 匹配换行键。
> `\r` 匹配回车键。
> `\t` 匹配制表符tab（U+0009）。
> `\v` 匹配垂直制表符（U+000B）。
> `\f` 匹配换页符（U+000C）。
> `\0` 匹配null字符（U+0000）。
> `\xhh` 匹配一个以两位十六进制数（\x00-\xFF）表示的字符。
> `\uhhhh` 匹配一个以四位十六进制数（\u0000-\uFFFF）表示的unicode字符。

http://javascript.ruanyifeng.com/stdlib/regexp.html#toc11

# 字符类 `[xyz]`

字符类表示**有一系列字符可供选择，只要匹配其中一个就可以了**,所有可供选择的字符都放在方括号`[]`内

- 1.脱字符（`^`）

**脱字符只有在字符类的第一个位置(即`[^......]`)才有特殊含义，否则就是字面含义。**

脱字符（`^`）表示除了字符类之中的字符，其他字符都可以匹配; 比如[^xyz]表示除了x、y、z之外都可以匹配

/[^abc]/.test('hello world') // true
/[^abc]/.test('bbc') // false

**匹配一切字符：** `[^]`，表示匹配一切字符，其中包括换行符，而点号（`.`）是不包括换行符的。

eg: 

```
var s = 'Please yes\nmake my day!';

s.match(/yes.*day/) // null
s.match(/yes[^]*day/) // [ 'yes\nmake my day']
```

- 2.连字符（`-`）

连字符（`-`）用来提供简写形式，表示字符的连续范围

以下都是合法的字符类简写形

```
[0-9.,]
[0-9a-fA-F]
[a-zA-Z0-9-]
[1-31] // 只代表1到3
/[\u0128-\uFFFF]/.test(str) // true
```

** 注意： **

- 当连字号（`-`）不出现在方括号`[]`之中，就不具备简写的作用，只代表字面的含义; `/a-z/.test('b') // false`

- 字符类的连字符(`-`)必须在头尾两个字符中间，才有特殊含义，否则就是字面含义; [-9]匹配的不是0-9

- 指定Unicode字符的范围: `/[\u0128-\uFFFF]/.test(\u0130\u0131\u0132)`

# 预定义模式 （简写）

 某些常见模式的简写方式

> `\d` 匹配0-9之间的任一数字，相当于[0-9]。
> `\D` 匹配所有0-9以外的字符，相当于[^0-9]。
> `\w` 匹配任意的字母、数字和下划线，相当于[A-Za-z0-9_]。
> `\W` 除所有字母、数字和下划线以外的字符，相当于[^A-Za-z0-9_]。
> `\s` 匹配空格（包括制表符、空格符、断行符等），相等于[\t\r\n\v\f]。
> `\S` 匹配非空格的字符，相当于[^\t\r\n\v\f]。
> `\b` 匹配词的边界。
> `\B` 匹配非词边界，即在词的内部。

# 重复类

模式的精确匹配次数，使用大括号（`{}`）表示。

> `{n}` 表示恰好重复n次，
> `{n,}` 表示至少重复n次，
> `{n,m}` 表示重复不少于n次，不多于m次。

eg:

```
<!-- 2次 -->
/lo{2}k/.test('look') // true

<!-- 2到5次 -->
/lo{2,5}k/.test('looook') // true
```

# 量词符

> `?` 问号表示某个模式出现0次或1次，等同于`{0, 1}`。
> `*` 星号表示某个模式出现0次或多次，等同于`{0,}`。
> `+` 加号表示某个模式出现1次或多次，等同于`{1,}`。

# 贪婪模式

想将贪婪模式改为非贪婪模式，可以在**量词符**后面加一个问号`?`

```
var s = 'aaa';
s.match(/a+?/) // ["a"]
```

上面代码中，模式结尾添加了一个问号`/a+?/`，这时就改为非贪婪模式，一旦条件满足，就不再往下匹配。

除了非贪婪模式的加号，还有非贪婪模式的星号（*）

> `*?`：表示某个模式出现0次或多次，匹配时采用非贪婪模式。
> `+?`：表示某个模式出现1次或多次，匹配时采用非贪婪模式。
