https://www.zhihu.com/question/56153336/answer/153054639

在项目中require vue包后用webpack打包，却报了下面这样一个错误： 

> You are using the runtime-only build of Vue where the template compiler is not available. Either pre-compile the templates into render functions, or use the compiler-included build. 

翻译过来意思即当前用的是Vue的运行时构建方式，这种方式是默认不包含template编译的。给出的建议是不然用预编译(自己写编译template的render函数)，不然就用包含template编译功能的构建方式(独立构建)。 

# 构建
Vue.js 的运行过程(从代码开始执行到页面最终生成)实际上包含两步。

1. 编译器将字符串模板（template）编译为渲染函数（render），称之为编译过程；
2. 运行时调用编译的渲染函数生成页面元素，这称之为运行过程。

总结来看。先是编译生成渲染函数，然后再调用这个函数生成页面元素。而构建，就是指这一整个过程。

之所以出现构建方式的不同，主要的是在第一步的编译过程，运行时构建是不包括编译的，也就是说不能将字符串模板编译为渲染函数，只能我们自己实现render。而独立构建这部分由Vue帮我们做了，但是它是依赖于DOM API 的，所以不适用与SSR。

没有接触 Vue 1.0，但查阅资料显示，SSR(服务端渲染)是2.0才引入的新内容。 Vue.js 1.0 的编译过程需要依赖浏览器的 DOM，所以无法（或者说没有意义）将编译器和运行时分开。因此在 Vue.js 1.0 分发包中，编译器和运行时是打包在一起，都在浏览器端执行，此时也就没有构建方式的问题暴露出来。

紧接着2.0版本引入SSR之后，为了支持服务端渲染（server-side rendering），编译器不能依赖于 DOM，所以必须将编译器和运行时分开。这就形成了独立构建（编译器 + 运行时）和运行时构建（仅运行时）。

# 官方解释

有两种构建方式，独立构建和运行构建。它们的区别在于前者包含模板编译器，而后者不包含。

模板编译用于编译 Vue 模板字符串成纯 JavaScript 渲染函数。如果你想用 template 选项， 你需要编译。模板编译器的职责是将模板字符串编译为纯 JavaScript 的渲染函数。如果你想要在组件中使用 template 选项，你就需要编译器。

- 独立构建包含模板编译器并支持 template 选项。 它也依赖于浏览器的接口的存在，所以你不能使用它来为服务器端渲染。

- 运行时构建不包含模板编译器，因此不支持 template 选项，只能用 render 选项，但即使使用运行时构建，在单文件组件中也依然可以写模板，因为单文件组件的模板会在构建时预编译为 render 函数(我理解的是因为vue-loader和vuerify这类工具已经已经完成了template到render函数的编译过程)。运行时构建比独立构建要轻量30%，只有 17.14 Kb min+gzip大小。


# 解决方案

 解决方案是针对不同的安装方式来说的。 

1. 独立版本

 直接下载并用 <script> 标签引入，Vue 会被注册为一个全局变量。这种方式1.0和2.0是相同的，都是独立构建，即编译器和运行时同时打包。 

2.  NPM

在用 Vue.js 构建大型应用时推荐使用 NPM 安装， NPM 能很好地和诸如 Webpack 或 Browserify 模块打包器配合使用。 Vue.js 也提供配套工具来开发单文件组件。

但是，默认 NPM 包导出的是 运行时 构建。

结合以上的解释，我们知道，运行时构建不支持组件内的template选项。所以为了使用独立构建(一般是因为我们在浏览器端使用了包引入的方式使用vue这个对象)，在 webpack 配置中添加下面的别名：

```
结合以上的解释，我们知道，运行时构建不支持组件内的template选项。所以为了使用独立构建(一般是因为我们在浏览器端使用了包引入的方式使用vue这个对象)，在 webpack 配置中添加下面的别名：
```

总结来说：

Vue的构建简单来说是指模板编译和渲染，由template到页面元素中间经过了模版编译和调用渲染函数的过程。之所以出现构建方式的不同，是因为Vue的独立构建依赖于DOM API，而2.0版本引入了SSR的内容，所以独立构建在服务端是不适用的。因此vue的包分发方式就有意将编译器的部分独立了出来，在服务端渲染的情境下用运行时构建不包括编译器的部分，所以打包出来体积会小很多，但是同时因为不支持编译，所以必须由我们自己实现render渲染函数。在单文件组件情景下，vue-loader等工具已经帮我们编译好了render函数，所以这时也可以用template选项。 